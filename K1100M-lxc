# Remember that host and guest driver have to be in sync!

# https://theorangeone.net/posts/lxc-nvidia-gpu-passthrough/

apt update
apt upgrade -y
apt install gcc make -y

# K1100M specific

wget https://us.download.nvidia.com/XFree86/Linux-x86_64/470.161.03/NVIDIA-Linux-x86_64-470.161.03.run

# Disable nouveau driver, just copying exactly what the Nvidia installer would make
cat << EOF >> /etc/modprobe.d/nvidia-installer-disable-nouveau.conf
# generated by nvidia-installer
blacklist nouveau
options nouveau modeset=0
EOF

reboot now

sh NVIDIA-Linux-x86_64-470.161.03.run --no-kernel-module # Use default options
